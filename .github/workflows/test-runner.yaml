name: "csn-pipeline-test"

on:
  push:
    branches:
      - main

jobs:
  test:
    name: "csn-test"
    runs-on: self-hosted

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v2

      - name: Check working directory
        run: pwd

      # - name: Install Docker
      #   run: |
      #     sudo apt-get update -y &&
      #     sudo apt-get install -y ca-certificates curl gnupg &&
      #     sudo install -m 0755 -d /etc/apt/keyrings &&
      #     curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg &&
      #     sudo chmod a+r /etc/apt/keyrings/docker.gpg &&
      #     echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null &&
      #     sudo apt-get update -y &&
      #     sudo apt-get install -y docker-ce docker-ce-cli containerd.io &&
      #     sudo systemctl start docker &&
      #     sudo systemctl enable docker

      - name: Check Docker version
        run: docker --version

      - name: Check containers
        run: docker ps -a
