name: "csn-pipeline-test"

on:
  push:
    branches:
      - main

jobs:
  test:
    name: "csn-test"
    runs-on: self-hosted
   # env:
   #   AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
   #   AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}

   # defaults:
   #   run:
   #     working-directory: source
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v2

      - name: check working directory
        run: pwd

      - name: install docker
        run: sudo apt-get update -y/
             sudo apt-get install -y ca-certificates curl gnupg/
             sudo install -m 0755 -d /etc/apt/keyrings/
             curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg/
             sudo chmod a+r /etc/apt/keyrings/docker.gpg

      - name: check the containers that are running
        run: docker --version